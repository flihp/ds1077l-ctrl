.PHONY : all clean

PREFIX = ds1077l

COMMON_OBJ = ${PREFIX}.o
COMMON_SRC = ${PREFIX}.h ${PREFIX}.c

BUS_BIN = ${PREFIX}-bus
BUS_OBJ = ${PREFIX}-bus.o
BUS_SRC = ${PREFIX}-bus.c ${PREFIX}-bus.h ${PREFIX}.h

DIV_BIN = ${PREFIX}-div
DIV_OBJ = ${PREFIX}-div.o
DIV_SRC = ${PREFIX}-div.c ${PREFIX}-div.h

PREFIX_MUX = ${PREFIX}-mux
MUX_BIN = ${PREFIX_MUX}
MUX_OBJ = ${PREFIX_MUX}.o
MUX_SRC = ${PREFIX_MUX}.c ${PREFIX_MUX}.h

BINS = ${BUS_BIN} ${DIV_BIN} ${MUX_BIN}
OBJS = ${COMMON_OBJ} ${BUS_OBJ} ${DIV_OBJ} ${MUX_OBJ}

all : ${BINS}
clean :
	rm -f ${BINS} ${OBJS}

${COMMON_OBJ} : ${COMMON_SRC}

${BUS_BIN} : ${COMMON_OBJ} ${BUS_OBJ}

${DIV_OBJ} : ${DIV_SRC}
${DIV_BIN} : ${COMMON_OBJ} ${DIV_OBJ}

${MUX_OBJ} : ${MUX_SRC}
${MUX_BIN} : ${COMMON_OBJ} ${MUX_OBJ}
